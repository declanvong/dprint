{"version":3,"sources":["formatter.worker.ts","components/CodeEditor.tsx","components/Spinner.tsx","components/ExternalLink.tsx","FormatterWorker.ts","Playground.tsx","plugins/getPluginDefaultConfig.ts","plugins/getPluginInfo.ts","utils/UrlSharer.ts","index.tsx"],"names":["addMethods","methods","module","exports","w","Worker","name","Language","Spinner","props","backgroundColor","className","style","color","loading","size","CodeEditor","editor","monacoEditor","outerContainerRef","React","createRef","disposables","lastScrollTop","state","editorComponent","undefined","editorDidMount","bind","reactMonacoEditorPromise","then","language","TypeScript","languages","typescript","typescriptDefaults","setCompilerOptions","noLib","target","ScriptTarget","ESNext","allowNonTsExtensions","setDiagnosticsOptions","noSyntaxValidation","noSemanticValidation","defineTheme","base","inherit","rules","colors","setState","default","catch","err","console","error","this","updateScrollTop","updateJsonSchema","ref","getEditor","dispose","length","width","height","value","text","theme","onChange","options","automaticLayout","renderWhitespace","readOnly","readonly","minimap","enabled","quickSuggestions","rulers","lineWidth","push","onDidChangeModelContent","setPosition","column","lineNumber","onDidScrollChange","e","scrollTopChanged","onScrollTopChange","scrollTop","lastHeight","lastWidth","intervalId","setInterval","containerElement","current","offsetWidth","offsetHeight","layout","clearInterval","setTimeout","setScrollTop","jsonSchemaUrl","json","jsonDefaults","diagnosticsOptions","schemas","uri","validate","allowComments","enableSchemaRequest","fileMatch","Component","ExternalLink","id","href","url","rel","formatterWorker","createWorker","formatListeners","errorListeners","addEventListener","ev","data","type","listener","message","Playground","configText","onConfigTextChanged","onTextChanged","formattedText","fileExtensions","selectedPlugin","plugins","onSelectPlugin","isLoading","useState","fileExtension","setFileExtension","useEffect","timeout","filePath","fileText","postMessage","clearTimeout","config","JSON","parse","useMemo","parseInt","isNaN","onFileExtensionChange","useCallback","event","split","defaultSize","allowResize","minSize","pane1Style","overflowX","overflowY","pane2Style","flex","display","selectedIndex","map","pluginInfo","i","ext","Json","configSchemaUrl","plugin","a","fetch","response","wroteProperty","Object","keys","properties","propertyName","property","defaultValue","definitions","toString","schemaVersion","Error","typescriptPlugin","latest","find","p","configKey","jsonPlugin","markdownPlugin","Markdown","decompress","decompressFromEncodedURIComponent","trim","urlSaver","locationHash","document","location","hash","matches","exec","getText","getConfigText","getLanguage","window","history","replaceState","compressToEncodedURIComponent","initialUrl","getUrlInfo","isFirstLoad","Loader","setPlugins","setPlugin","setFileExtensions","setText","setConfigText","defaultConfigText","setDefaultConfigText","setFormattedText","setIsLoading","getPluginInfo","alert","updateUrl","defaultConfigPromise","getPluginDefaultConfig","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b218403f.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = []\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"f05e7df0fd0bda61ac08.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import type * as monacoEditorForTypes from \"monaco-editor\";\nimport React from \"react\";\nimport type ReactMonacoEditorForTypes from \"react-monaco-editor\";\nimport { Spinner } from \"./Spinner\";\n\nexport interface CodeEditorProps {\n    onChange?: (text: string) => void;\n    text?: string;\n    readonly?: boolean;\n    lineWidth?: number;\n    scrollTop?: number;\n    jsonSchemaUrl?: string;\n    onScrollTopChange?: (scrollTop: number) => void;\n    language: Language;\n}\n\nexport enum Language {\n    TypeScript = \"typescript\",\n    Json = \"json\",\n    Markdown = \"markdown\",\n}\n\nexport interface CodeEditorState {\n    editorComponent: (typeof ReactMonacoEditorForTypes) | undefined | false;\n}\n\nexport class CodeEditor extends React.Component<CodeEditorProps, CodeEditorState> {\n    private editor: monacoEditorForTypes.editor.IStandaloneCodeEditor | undefined;\n    private monacoEditor: typeof monacoEditorForTypes | undefined;\n    private outerContainerRef = React.createRef<HTMLDivElement>();\n    private disposables: monacoEditorForTypes.IDisposable[] = [];\n\n    constructor(props: CodeEditorProps) {\n        super(props);\n        this.state = {\n            editorComponent: undefined,\n        };\n        this.editorDidMount = this.editorDidMount.bind(this);\n\n        const reactMonacoEditorPromise = import(\"react-monaco-editor\");\n        import(\"monaco-editor\").then(monacoEditor => {\n            this.monacoEditor = monacoEditor;\n            if (this.props.language === Language.TypeScript) {\n                monacoEditor.languages.typescript.typescriptDefaults.setCompilerOptions({\n                    noLib: true,\n                    target: monacoEditor.languages.typescript.ScriptTarget.ESNext,\n                    allowNonTsExtensions: true,\n                });\n                monacoEditor.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\n                    noSyntaxValidation: true,\n                    noSemanticValidation: true,\n                });\n            }\n\n            monacoEditor.editor.defineTheme(\"dprint-theme\", {\n                base: \"vs-dark\",\n                inherit: true,\n                rules: [],\n                colors: {\n                    \"editorRuler.foreground\": \"#283430\",\n                },\n            });\n\n            reactMonacoEditorPromise.then(editor => {\n                this.setState({ editorComponent: editor.default });\n            }).catch(err => {\n                console.error(err);\n                this.setState({ editorComponent: false });\n            });\n        }).catch(err => {\n            console.error(err);\n            this.setState({ editorComponent: false });\n        });\n    }\n\n    render() {\n        this.updateScrollTop();\n        this.updateJsonSchema();\n\n        return (\n            <div className=\"codeEditor\" ref={this.outerContainerRef}>\n                {this.getEditor()}\n            </div>\n        );\n    }\n\n    componentWillUnmount() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n        this.disposables.length = 0; // clear\n    }\n\n    private getEditor() {\n        if (this.state.editorComponent == null) {\n            return <Spinner backgroundColor=\"#1e1e1e\" />;\n        }\n        if (this.state.editorComponent === false) {\n            return <div className={\"errorMessage\"}>Error loading code editor. Please refresh the page to try again.</div>;\n        }\n\n        return (\n            <this.state.editorComponent\n                width=\"100%\"\n                height=\"100%\"\n                value={this.props.text}\n                theme=\"dprint-theme\"\n                language={this.props.language}\n                onChange={text => this.props.onChange && this.props.onChange(text)}\n                editorDidMount={this.editorDidMount}\n                options={{\n                    automaticLayout: false,\n                    renderWhitespace: \"all\",\n                    readOnly: this.props.readonly || false,\n                    minimap: { enabled: false },\n                    quickSuggestions: false,\n                    rulers: this.props.lineWidth == null ? [] : [this.props.lineWidth],\n                }}\n            />\n        );\n    }\n\n    private editorDidMount(editor: monacoEditorForTypes.editor.IStandaloneCodeEditor) {\n        this.editor = editor;\n\n        this.disposables.push(this.editor.onDidChangeModelContent(() => {\n            if (this.props.readonly) {\n                this.editor!.setPosition({\n                    column: 1,\n                    lineNumber: 1,\n                });\n            }\n        }));\n\n        this.disposables.push(this.editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this.props.onScrollTopChange) {\n                this.props.onScrollTopChange(e.scrollTop);\n            }\n        }));\n\n        // manually refresh the layout of the editor (lightweight compared to monaco editor)\n        let lastHeight = 0;\n        let lastWidth = 0;\n        const intervalId = setInterval(() => {\n            const containerElement = this.outerContainerRef.current;\n            if (containerElement == null) {\n                return;\n            }\n\n            const width = containerElement.offsetWidth;\n            const height = containerElement.offsetHeight;\n            if (lastHeight === height && lastWidth === width) {\n                return;\n            }\n\n            editor.layout();\n\n            lastHeight = height;\n            lastWidth = width;\n        }, 500);\n        this.disposables.push({ dispose: () => clearInterval(intervalId) });\n    }\n\n    private lastScrollTop = 0;\n    private updateScrollTop() {\n        if (this.editor == null || this.lastScrollTop === this.props.scrollTop) {\n            return;\n        }\n\n        // todo: not sure how to not do this in the render method? I'm not a react/web person.\n        setTimeout(() => {\n            if (this.props.scrollTop != null) {\n                this.editor!.setScrollTop(this.props.scrollTop);\n                this.lastScrollTop = this.props.scrollTop;\n            }\n        }, 0);\n    }\n\n    private updateJsonSchema() {\n        if (this.monacoEditor != null && this.props.jsonSchemaUrl != null) {\n            if (this.monacoEditor.languages.json.jsonDefaults.diagnosticsOptions.schemas?.[0]?.uri !== this.props.jsonSchemaUrl) {\n                this.monacoEditor.languages.json.jsonDefaults.setDiagnosticsOptions({\n                    validate: true,\n                    allowComments: true,\n                    enableSchemaRequest: true,\n                    schemas: [{\n                        uri: this.props.jsonSchemaUrl,\n                        fileMatch: [\"*\"],\n                    }],\n                });\n            }\n        }\n    }\n}\n","import React from \"react\";\nimport { BeatLoader } from \"react-spinners\";\n\nexport function Spinner(props: { backgroundColor?: string }) {\n    const { backgroundColor } = props;\n    return (\n        <div className={\"verticallyCenter horizontallyCenter fillHeight\"} style={{ backgroundColor }}>\n            <BeatLoader color={\"#fff\"} loading={true} size={25} />\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport function ExternalLink(props: { text: string; url: string; id?: string }): React.ReactElement {\n    return <a id={props.id} href={props.url} rel=\"noopener noreferrer\">{props.text}</a>;\n}\n","// eslint-disable-next-line import/no-webpack-loader-syntax\nimport createWorker from \"workerize-loader!./formatter.worker\";\n\nconst formatterWorker = createWorker();\nconst formatListeners: ((text: string) => void)[] = [];\nconst errorListeners: ((err: string) => void)[] = [];\n\nformatterWorker.addEventListener(\"message\", ev => {\n    switch (ev.data.type) {\n        case \"Format\":\n            for (const listener of formatListeners) {\n                listener(ev.data.text);\n            }\n            break;\n        case \"Error\":\n            for (const listener of errorListeners) {\n                listener(ev.data.message);\n            }\n            break;\n    }\n});\n\nexport function loadUrl(url: string) {\n    formatterWorker.postMessage({\n        type: \"LoadUrl\",\n        url,\n    });\n}\n\nexport function setConfig(config: any) {\n    formatterWorker.postMessage({\n        type: \"SetConfig\",\n        config,\n    });\n}\n\nexport function formatText(filePath: string, fileText: string) {\n    formatterWorker.postMessage({\n        type: \"Format\",\n        filePath,\n        fileText,\n    });\n}\n\nexport function addOnFormat(listener: (text: string) => void) {\n    formatListeners.push(listener);\n}\n\nexport function removeOnFormat(listener: (text: string) => void) {\n    const index = formatListeners.indexOf(listener);\n    if (index >= 0) {\n        formatListeners.splice(index, 1);\n    }\n}\n\nexport function addOnError(listener: (err: string) => void) {\n    errorListeners.push(listener);\n}\n\nexport function removeOnError(listener: (err: string) => void) {\n    const index = errorListeners.indexOf(listener);\n    if (index >= 0) {\n        errorListeners.splice(index, 1);\n    }\n}\n","import React, { ChangeEvent, useCallback, useEffect, useMemo, useState } from \"react\";\nimport SplitPane from \"react-split-pane\";\nimport \"./external/react-splitpane.css\";\nimport { CodeEditor, ExternalLink, Language } from \"./components\";\nimport { Spinner } from \"./components\";\nimport * as formatterWorker from \"./FormatterWorker\";\nimport \"./Playground.css\";\nimport { PluginInfo } from \"./plugins\";\n\nexport interface PlaygroundProps {\n    configText: string;\n    onConfigTextChanged: (text: string) => void;\n    text: string;\n    onTextChanged: (text: string) => void;\n    formattedText: string;\n    fileExtensions: string[];\n    selectedPlugin: PluginInfo;\n    plugins: PluginInfo[];\n    onSelectPlugin: (plugin: PluginInfo) => void;\n    isLoading: boolean;\n}\n\nexport function Playground({\n    configText,\n    onConfigTextChanged,\n    text,\n    onTextChanged,\n    formattedText,\n    fileExtensions,\n    selectedPlugin,\n    plugins,\n    onSelectPlugin,\n    isLoading,\n}: PlaygroundProps) {\n    const [scrollTop, setScrollTop] = useState(0);\n    const [fileExtension, setFileExtension] = useState<string | undefined>(undefined);\n\n    useEffect(() => {\n        setFileExtension(fileExtensions[0]);\n    }, [fileExtensions]);\n\n    useEffect(() => {\n        const timeout = setTimeout(() => {\n            formatterWorker.formatText(\"file.\" + fileExtension ?? \"ts\", text);\n        }, 250);\n\n        return () => clearTimeout(timeout);\n    }, [fileExtension, text]);\n\n    useEffect(() => {\n        const timeout = setTimeout(() => {\n            let config;\n            try {\n                config = JSON.parse(configText);\n                if (config.lineWidth == null) {\n                    config.lineWidth = 80;\n                }\n                formatterWorker.setConfig(config);\n            } catch (err) {\n                // ignore for now\n            }\n        }, 250);\n\n        return () => clearTimeout(timeout);\n    }, [configText]);\n\n    const lineWidth = useMemo(() => {\n        try {\n            const lineWidth = parseInt(JSON.parse(configText).lineWidth, 10);\n            if (!isNaN(lineWidth)) {\n                return lineWidth;\n            }\n        } catch (err) {\n            // ignore\n        }\n        return 80;\n    }, [configText]);\n    const onFileExtensionChange = useCallback((event: ChangeEvent<HTMLSelectElement>) => {\n        setFileExtension(event.target.value);\n    }, [setFileExtension]);\n\n    return (\n        <div className=\"App\">\n            <SplitPane split=\"horizontal\" defaultSize={53} allowResize={false}>\n                <header className=\"appHeader\">\n                    <h1 id=\"title\">dprint - Playground</h1>\n                    <div id=\"headerRight\">\n                        <a href=\"/overview\">Overview</a>\n                        <a href=\"/playground\">Playground</a>\n                        <a href=\"/sponsor\">Sponsor</a>\n                        <ExternalLink url=\"https://github.com/dprint/dprint\" text=\"View on GitHub\" />\n                    </div>\n                </header>\n                <SplitPane\n                    split=\"vertical\"\n                    minSize={50}\n                    defaultSize=\"50%\"\n                    allowResize={true}\n                    pane1Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                    pane2Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                >\n                    <SplitPane\n                        split=\"horizontal\"\n                        allowResize={true}\n                        defaultSize=\"60%\"\n                        pane1Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                        pane2Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                    >\n                        <div className=\"container\">\n                            <div className=\"playgroundSubTitle\">\n                                <div className=\"row\">\n                                    <div className=\"column\">\n                                        Plugin:\n                                    </div>\n                                    <div className=\"column\" style={{ flex: 1, display: \"flex\" }}>\n                                        <select onChange={e => onSelectPlugin(plugins[e.target.selectedIndex])} style={{ flex: 1 }} value={selectedPlugin.url}>\n                                            {plugins.map((pluginInfo, i) => {\n                                                return <option key={i} value={pluginInfo.url}>\n                                                    {pluginInfo.url}\n                                                </option>;\n                                            })}\n                                        </select>\n                                    </div>\n                                    <div className=\"column\" style={{ display: \"flex\" }}>\n                                        <select value={fileExtension} onChange={onFileExtensionChange}>\n                                            {fileExtensions.map((ext, i) => <option key={i} value={ext}>{\".\"}{ext}</option>)}\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                            <CodeEditor\n                                language={selectedPlugin.language}\n                                onChange={onTextChanged}\n                                text={text}\n                                lineWidth={lineWidth}\n                                onScrollTopChange={setScrollTop}\n                                scrollTop={scrollTop}\n                            />\n                        </div>\n                        <div className=\"container\">\n                            <div className=\"playgroundSubTitle\">\n                                Configuration\n                            </div>\n                            <CodeEditor\n                                language={Language.Json}\n                                onChange={onConfigTextChanged}\n                                jsonSchemaUrl={selectedPlugin.configSchemaUrl}\n                                text={configText}\n                            />\n                        </div>\n                    </SplitPane>\n                    <div className=\"container\">\n                        {isLoading ? <Spinner /> : <CodeEditor\n                            language={selectedPlugin.language}\n                            text={formattedText}\n                            readonly={true}\n                            lineWidth={lineWidth}\n                            onScrollTopChange={setScrollTop}\n                            scrollTop={scrollTop}\n                        />}\n                    </div>\n                </SplitPane>\n            </SplitPane>\n        </div>\n    );\n}\n","import { PluginInfo } from \"./getPluginInfo\";\n\nexport async function getPluginDefaultConfig(plugin: PluginInfo) {\n    const response = await fetch(plugin.configSchemaUrl);\n    const json = await response.json();\n    let text = \"{\";\n    let wroteProperty = false;\n\n    for (const propertyName of Object.keys(json.properties)) {\n        if (propertyName === \"$schema\" || propertyName === \"deno\" || propertyName === \"locked\") {\n            continue;\n        }\n        const property = json.properties[propertyName];\n        let defaultValue: string | boolean | number | undefined;\n\n        if (property[\"$ref\"]) {\n            defaultValue = json.definitions[propertyName]?.default;\n        } else {\n            defaultValue = property.default;\n        }\n\n        if (defaultValue != null) {\n            if (wroteProperty) {\n                text += \",\\n\";\n            } else {\n                text += \"\\n\";\n            }\n\n            text += `  \"${propertyName}\": `;\n            if (typeof defaultValue === \"string\") {\n                text += `\"${defaultValue}\"`;\n            } else {\n                if (propertyName === \"lineWidth\") {\n                    text += \"80\";\n                } else {\n                    text += `${defaultValue.toString()}`;\n                }\n            }\n\n            wroteProperty = true;\n        }\n    }\n\n    text += \"\\n}\\n\";\n\n    return text;\n}\n","import { Language } from \"../components\";\n\nexport async function getPluginInfo(): Promise<PluginInfo[]> {\n    const response = await fetch(\"https://plugins.dprint.dev/info.json\");\n    const json = await response.json();\n    const expectedSchemaVersion = 3;\n\n    if (json.schemaVersion !== expectedSchemaVersion) {\n        throw new Error(`Expected schema version ${expectedSchemaVersion}, but found ${json.schemaVersion}.`);\n    }\n\n    const typescriptPlugin = json.latest.find((p: any) => p.configKey === \"typescript\")!;\n    const jsonPlugin = json.latest.find((p: any) => p.configKey === \"json\")!;\n    const markdownPlugin = json.latest.find((p: any) => p.configKey === \"markdown\")!;\n\n    return [{\n        url: typescriptPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/typescript-v0.json\",\n        language: Language.TypeScript,\n        fileExtensions: typescriptPlugin.fileExtensions,\n    }, {\n        url: jsonPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/json-v0.json\",\n        language: Language.Json,\n        fileExtensions: jsonPlugin.fileExtensions,\n    }, {\n        url: markdownPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/markdown-v0.json\",\n        language: Language.Markdown,\n        fileExtensions: markdownPlugin.fileExtensions,\n    }];\n}\n\nexport interface PluginInfo {\n    url: string;\n    configSchemaUrl: string;\n    language: Language;\n    fileExtensions: string[];\n}\n","import { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from \"lz-string\";\n\nexport class UrlSaver {\n    getUrlInfo() {\n        const locationHash = document.location.hash || \"\";\n\n        return {\n            text: getText(),\n            configText: getConfigText(),\n            language: getLanguage(),\n        };\n\n        function getText() {\n            const matches = /code\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return \"\";\n            }\n\n            try {\n                return decompress(matches[1]);\n            } catch (err) {\n                console.error(err);\n                return \"\";\n            }\n        }\n\n        function getConfigText(): string | undefined {\n            const matches = /config\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return undefined;\n            }\n\n            try {\n                return decompress(matches[1]);\n            } catch (err) {\n                console.error(err);\n                return undefined;\n            }\n        }\n\n        function getLanguage(): \"typescript\" | \"json\" | \"markdown\" {\n            const matches = /language\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return \"typescript\";\n            }\n\n            try {\n                switch (matches[1]) {\n                    case \"json\":\n                        return \"json\";\n                    case \"markdown\":\n                        return \"markdown\";\n                    case \"typescript\":\n                    default:\n                        return \"typescript\";\n                }\n            } catch (err) {\n                console.error(err);\n                return \"typescript\";\n            }\n        }\n    }\n\n    updateUrl({ text, configText, language }: { text: string; configText?: string; language?: \"typescript\" | \"json\" | \"markdown\" }) {\n        if (language == null) {\n            window.history.replaceState(\n                undefined,\n                \"\",\n                ``,\n            );\n        } else {\n            let url = `#code/${compressToEncodedURIComponent(text)}`;\n            if (configText != null) {\n                url += `/config/${compressToEncodedURIComponent(configText)}`;\n            }\n            url += `/language/${language}`;\n            window.history.replaceState(\n                undefined,\n                \"\",\n                url,\n            );\n        }\n    }\n}\n\nfunction decompress(text: string) {\n    return decompressFromEncodedURIComponent(text.trim()) || \"\"; // will be null on error\n}\n","import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Spinner } from \"./components\";\nimport * as formatterWorker from \"./FormatterWorker\";\nimport \"./index.css\";\nimport { Playground } from \"./Playground\";\nimport { getPluginDefaultConfig, getPluginInfo, PluginInfo } from \"./plugins\";\nimport { UrlSaver } from \"./utils\";\n\nconst urlSaver = new UrlSaver();\nconst initialUrl = urlSaver.getUrlInfo();\nlet isFirstLoad = true;\n\nfunction Loader() {\n    const [plugins, setPlugins] = useState<PluginInfo[]>([]);\n    const [plugin, setPlugin] = useState<PluginInfo | undefined>();\n    const [fileExtensions, setFileExtensions] = useState<string[]>([]);\n    const [text, setText] = useState(initialUrl.text);\n    const [configText, setConfigText] = useState(initialUrl.configText ?? \"\");\n    const [defaultConfigText, setDefaultConfigText] = useState(\"\");\n    const [formattedText, setFormattedText] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        getPluginInfo().then(plugins => {\n            setPlugins(plugins);\n            setPlugin(plugins.find(p => p.language === initialUrl.language ?? \"typescript\")!);\n        }).catch(err => {\n            console.error(err);\n            alert(\"There was an error getting the plugins. Try refreshing the page or check the browser console.\");\n        });\n    }, []);\n    useEffect(() => {\n        formatterWorker.addOnFormat(text => {\n            setFormattedText(text);\n        });\n\n        formatterWorker.addOnError(err => {\n            console.error(err);\n            alert(\"There was an error with the formatter worker. Try refreshing the page or check the browser console.\");\n        });\n    }, []);\n\n    useEffect(() => {\n        if (plugin == null) {\n            return;\n        }\n\n        urlSaver.updateUrl({\n            text,\n            configText: configText === defaultConfigText ? undefined : configText,\n            language: plugin.language,\n        });\n    }, [text, configText, plugin, defaultConfigText]);\n\n    useEffect(() => {\n        setIsLoading(true);\n\n        if (plugin == null) {\n            return;\n        }\n\n        const defaultConfigPromise = getPluginDefaultConfig(plugin);\n\n        formatterWorker.loadUrl(plugin.url);\n\n        defaultConfigPromise.then(defaultConfigText => {\n            setFileExtensions([...plugin.fileExtensions]); // todo: get this from the wasm file (easy to do)\n\n            if (isFirstLoad && initialUrl.configText != null) {\n                setConfigText(initialUrl.configText);\n                isFirstLoad = false;\n            } else {\n                setConfigText(defaultConfigText);\n            }\n            setDefaultConfigText(defaultConfigText);\n            setIsLoading(false);\n        })\n            .catch(err => {\n                console.error(err);\n                alert(\"There was an error loading the plugin. Check the console or try refreshing the page.\");\n            });\n    }, [plugin]);\n\n    if (plugin == null) {\n        return <Spinner />;\n    }\n\n    return <Playground\n        text={text}\n        onTextChanged={setText}\n        configText={configText}\n        onConfigTextChanged={setConfigText}\n        formattedText={formattedText}\n        fileExtensions={fileExtensions}\n        plugins={plugins}\n        selectedPlugin={plugin}\n        onSelectPlugin={setPlugin}\n        isLoading={isLoading}\n    />;\n}\n\nReactDOM.render(<Loader />, document.getElementById(\"root\"));\n"],"sourceRoot":""}